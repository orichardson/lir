
========================================================================================================================
COMPREHENSIVE PDG ANALYSIS REPORT
========================================================================================================================

========================================================================================================================
INCONSISTENCY COMPUTATION EXPLANATION
========================================================================================================================

The inconsistency score measures how much the inferred joint distribution μ deviates from
the conditional probability distributions (CPDs) specified by the edges.

MATHEMATICAL FORMULA:
━━━━━━━━━━━━━━━━━━━━

Inconsistency(μ, PDG) = Σ_edges β_edge × D_KL(μ(Y|X) || CPD(Y|X))

Where:
  • μ = Joint probability distribution over all variables (inferred from the PDG)
  • μ(Y|X) = Conditional distribution of Y given X in the joint distribution μ
  • CPD(Y|X) = Conditional probability table specified by the edge X→Y
  • β_edge = Attention weight for the edge (typically 1.0, meaning "fully attend")
  • D_KL = Kullback-Leibler divergence (measures difference between distributions)

D_KL(P || Q) = Σ_outcomes P(outcome) × log(P(outcome) / Q(outcome))

STEP-BY-STEP COMPUTATION:
━━━━━━━━━━━━━━━━━━━━━━━━━━

1. START with the PDG structure (variables + edges + CPDs)

2. FIND the optimal joint distribution μ* that minimizes inconsistency:
   μ* = argmin_μ Σ_edges β × D_KL(μ(Y|X) || CPD(Y|X))
   
   This is done using gradient descent optimization (opt_joint function)
   with γ=0.0 (no entropy regularization) for 50 iterations.

3. For EACH edge X→Y in the PDG:
   a) Extract μ(Y|X) from the optimal joint distribution μ*
   b) Compare it to the CPD(Y|X) specified by the edge using KL divergence
   c) Weight by β (attention weight, typically 1.0)

4. SUM all the weighted divergences across edges to get total inconsistency

INTERPRETATION:
━━━━━━━━━━━━━━━

• Inconsistency = 0: Perfect consistency (all CPDs agree with the joint distribution)
• Inconsistency > 0: Conflicts exist (CPDs cannot all be satisfied simultaneously)
• Higher values = More severe conflicts between the CPDs

WHY INCONSISTENCY ARISES:
━━━━━━━━━━━━━━━━━━━━━━━━━

1. CYCLES: If B→C→B, then P(C|B) and P(B|C) create circular constraints
2. MULTIPLE PARENTS: If A→C and B→C with conflicting CPDs
3. OVER-SPECIFICATION: More constraints than degrees of freedom
4. MEASUREMENT ERROR: CPDs from different sources with inherent noise

In this experiment, all PDGs have deliberately introduced conflicts via:
  - Multiple edges pointing to the same target node
  - Random CPD initialization (unlikely to be mutually consistent)
  - Cycles in the graph structure
    

========================================================================================================================
PDG: chain_4v_3e
========================================================================================================================

📋 SUMMARY
  Number of Variables:     4
  Number of Edges:         3
  Conflict Nodes:          1 nodes → B
  Initial Inconsistency:   0.293768

📍 VARIABLES
  Variable     Domain Size     Domain Values                                               
  ------------ --------------- ------------------------------------------------------------
  A            2               a1, a0                                                      
  B            2               b0, b1                                                      
  C            2               c1, c0                                                      
  D            3               d0, d2, d1                                                  

🌐 GRAPH STRUCTURE
  A→B, B→C, C→B

🔗 EDGES SUMMARY
  Edge     Source     Target     CPD Shape    Conflict?                               
  -------- ---------- ---------- ------------ ----------------------------------------
  p1       A          B          (2, 2)       ⚠️  CONFLICT (2 incoming edges)         
  p2       B          C          (2, 2)                                               
  p3       C          B          (2, 2)       ⚠️  CONFLICT (2 incoming edges)         

📊 CONDITIONAL PROBABILITY DISTRIBUTIONS (CPDs)
  Each CPD represents P(Target | Source). Rows sum to 1.0.

  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 1: p1 — P(B | A)
          ⚠️  This edge contributes to conflict at node B
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        b0          b1         Sum
              ────────────────────────────────────
            a0 │      0.3932      0.6068      1.0000
            a1 │      0.7301      0.2699      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 2: p2 — P(C | B)
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        c0          c1         Sum
              ────────────────────────────────────
            b0 │      0.1939      0.8061      1.0000
            b1 │      0.2893      0.7107      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 3: p3 — P(B | C)
          ⚠️  This edge contributes to conflict at node B
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        b0          b1         Sum
              ────────────────────────────────────
            c0 │      0.4272      0.5728      1.0000
            c1 │      0.9625      0.0375      1.0000


========================================================================================================================
PDG: chain_5v_4e
========================================================================================================================

📋 SUMMARY
  Number of Variables:     5
  Number of Edges:         4
  Conflict Nodes:          2 nodes → B, C
  Initial Inconsistency:   0.573110

📍 VARIABLES
  Variable     Domain Size     Domain Values                                               
  ------------ --------------- ------------------------------------------------------------
  A            3               a1, a0, a2                                                  
  B            2               b0, b1                                                      
  C            2               c1, c0                                                      
  D            3               d0, d2, d1                                                  
  E            3               e0, e1, e2                                                  

🌐 GRAPH STRUCTURE
  A→B, B→C, C→B, D→C

🔗 EDGES SUMMARY
  Edge     Source     Target     CPD Shape    Conflict?                               
  -------- ---------- ---------- ------------ ----------------------------------------
  p4       A          B          (3, 2)       ⚠️  CONFLICT (2 incoming edges)         
  p5       B          C          (2, 2)       ⚠️  CONFLICT (2 incoming edges)         
  p6       C          B          (2, 2)       ⚠️  CONFLICT (2 incoming edges)         
  p7       D          C          (3, 2)       ⚠️  CONFLICT (2 incoming edges)         

📊 CONDITIONAL PROBABILITY DISTRIBUTIONS (CPDs)
  Each CPD represents P(Target | Source). Rows sum to 1.0.

  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 1: p4 — P(B | A)
          ⚠️  This edge contributes to conflict at node B
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        b0          b1         Sum
              ────────────────────────────────────
            a0 │      0.2007      0.7993      1.0000
            a1 │      0.8905      0.1095      1.0000
            a2 │      0.8937      0.1063      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 2: p5 — P(C | B)
          ⚠️  This edge contributes to conflict at node C
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        c0          c1         Sum
              ────────────────────────────────────
            b0 │      0.9925      0.0075      1.0000
            b1 │      0.3380      0.6620      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 3: p6 — P(B | C)
          ⚠️  This edge contributes to conflict at node B
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        b0          b1         Sum
              ────────────────────────────────────
            c0 │      0.6987      0.3013      1.0000
            c1 │      0.8295      0.1705      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 4: p7 — P(C | D)
          ⚠️  This edge contributes to conflict at node C
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        c0          c1         Sum
              ────────────────────────────────────
            d0 │      0.5061      0.4939      1.0000
            d1 │      0.5440      0.4560      1.0000
            d2 │      0.6301      0.3699      1.0000


========================================================================================================================
PDG: chain_6v_5e
========================================================================================================================

📋 SUMMARY
  Number of Variables:     6
  Number of Edges:         5
  Conflict Nodes:          2 nodes → B, C
  Initial Inconsistency:   0.204675

📍 VARIABLES
  Variable     Domain Size     Domain Values                                               
  ------------ --------------- ------------------------------------------------------------
  A            3               a1, a0, a2                                                  
  B            2               b0, b1                                                      
  C            3               c0, c1, c2                                                  
  D            2               d1, d0                                                      
  E            3               e0, e1, e2                                                  
  F            2               f1, f0                                                      

🌐 GRAPH STRUCTURE
  A→B, B→C, D→C, F→C, F→B

🔗 EDGES SUMMARY
  Edge     Source     Target     CPD Shape    Conflict?                               
  -------- ---------- ---------- ------------ ----------------------------------------
  p8       A          B          (3, 2)       ⚠️  CONFLICT (2 incoming edges)         
  p9       B          C          (2, 3)       ⚠️  CONFLICT (3 incoming edges)         
  p10      D          C          (2, 3)       ⚠️  CONFLICT (3 incoming edges)         
  p11      F          C          (2, 3)       ⚠️  CONFLICT (3 incoming edges)         
  p12      F          B          (2, 2)       ⚠️  CONFLICT (2 incoming edges)         

📊 CONDITIONAL PROBABILITY DISTRIBUTIONS (CPDs)
  Each CPD represents P(Target | Source). Rows sum to 1.0.

  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 1: p8 — P(B | A)
          ⚠️  This edge contributes to conflict at node B
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        b0          b1         Sum
              ────────────────────────────────────
            a0 │      0.0089      0.9911      1.0000
            a1 │      0.4242      0.5758      1.0000
            a2 │      0.5356      0.4644      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 2: p9 — P(C | B)
          ⚠️  This edge contributes to conflict at node C
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        c0          c1          c2         Sum
              ────────────────────────────────────────────────
            b0 │      0.3626      0.3191      0.3183      1.0000
            b1 │      0.6037      0.2474      0.1489      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 3: p10 — P(C | D)
          ⚠️  This edge contributes to conflict at node C
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        c0          c1          c2         Sum
              ────────────────────────────────────────────────
            d0 │      0.4518      0.5206      0.0276      1.0000
            d1 │      0.3921      0.5030      0.1048      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 4: p11 — P(C | F)
          ⚠️  This edge contributes to conflict at node C
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        c0          c1          c2         Sum
              ────────────────────────────────────────────────
            f0 │      0.2897      0.4353      0.2751      1.0000
            f1 │      0.1758      0.3512      0.4730      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 5: p12 — P(B | F)
          ⚠️  This edge contributes to conflict at node B
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        b0          b1         Sum
              ────────────────────────────────────
            f0 │      0.4326      0.5674      1.0000
            f1 │      0.4114      0.5886      1.0000


========================================================================================================================
PDG: chain_7v_6e
========================================================================================================================

📋 SUMMARY
  Number of Variables:     7
  Number of Edges:         6
  Conflict Nodes:          2 nodes → C, D
  Initial Inconsistency:   0.050337

📍 VARIABLES
  Variable     Domain Size     Domain Values                                               
  ------------ --------------- ------------------------------------------------------------
  A            2               a1, a0                                                      
  B            3               b0, b1, b2                                                  
  C            3               c0, c1, c2                                                  
  D            3               d0, d2, d1                                                  
  E            2               e0, e1                                                      
  F            3               f1, f0, f2                                                  
  G            2               g1, g0                                                      

🌐 GRAPH STRUCTURE
  A→B, B→C, C→D, E→A, G→D, E→C

🔗 EDGES SUMMARY
  Edge     Source     Target     CPD Shape    Conflict?                               
  -------- ---------- ---------- ------------ ----------------------------------------
  p13      A          B          (2, 3)                                               
  p14      B          C          (3, 3)       ⚠️  CONFLICT (2 incoming edges)         
  p15      C          D          (3, 3)       ⚠️  CONFLICT (2 incoming edges)         
  p16      E          A          (2, 2)                                               
  p17      G          D          (2, 3)       ⚠️  CONFLICT (2 incoming edges)         
  p18      E          C          (2, 3)       ⚠️  CONFLICT (2 incoming edges)         

📊 CONDITIONAL PROBABILITY DISTRIBUTIONS (CPDs)
  Each CPD represents P(Target | Source). Rows sum to 1.0.

  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 1: p13 — P(B | A)
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        b0          b1          b2         Sum
              ────────────────────────────────────────────────
            a0 │      0.1099      0.5097      0.3804      1.0000
            a1 │      0.3133      0.4746      0.2121      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 2: p14 — P(C | B)
          ⚠️  This edge contributes to conflict at node C
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        c0          c1          c2         Sum
              ────────────────────────────────────────────────
            b0 │      0.5438      0.0656      0.3906      1.0000
            b1 │      0.2639      0.4272      0.3089      1.0000
            b2 │      0.5094      0.1398      0.3508      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 3: p15 — P(D | C)
          ⚠️  This edge contributes to conflict at node D
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        d0          d1          d2         Sum
              ────────────────────────────────────────────────
            c0 │      0.1152      0.4345      0.4503      1.0000
            c1 │      0.1154      0.8066      0.0779      1.0000
            c2 │      0.5033      0.0748      0.4219      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 4: p16 — P(A | E)
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        a0          a1         Sum
              ────────────────────────────────────
            e0 │      0.4407      0.5593      1.0000
            e1 │      0.6475      0.3525      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 5: p17 — P(D | G)
          ⚠️  This edge contributes to conflict at node D
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        d0          d1          d2         Sum
              ────────────────────────────────────────────────
            g0 │      0.5499      0.2123      0.2378      1.0000
            g1 │      0.3256      0.3315      0.3429      1.0000


  ────────────────────────────────────────────────────────────────────────────────────────────────────
  Edge 6: p18 — P(C | E)
          ⚠️  This edge contributes to conflict at node C
  ────────────────────────────────────────────────────────────────────────────────────────────────────
                        c0          c1          c2         Sum
              ────────────────────────────────────────────────
            e0 │      0.2688      0.4596      0.2716      1.0000
            e1 │      0.2619      0.3090      0.4290      1.0000


========================================================================================================================
COMPARATIVE SUMMARY TABLE
========================================================================================================================

PDG             Vars   Edges   Conflicts   Avg Domain   Inconsistency      Structure                               
--------------- ------ ------- ----------- ------------ ------------------ ----------------------------------------
chain_4v_3e     4      3       1           2.25         0.293768           A→B, B→C, C→B                           
chain_5v_4e     5      4       2           2.60         0.573110           A→B, B→C, C→B (+1)                      
chain_6v_5e     6      5       2           2.50         0.204675           A→B, B→C, D→C (+2)                      
chain_7v_6e     7      6       2           2.57         0.050337           A→B, B→C, C→D (+3)                      

========================================================================================================================
KEY INSIGHTS
========================================================================================================================

1. INCONSISTENCY RANKING (Highest to Lowest):
   1. chain_5v_4e: 0.573110
   2. chain_4v_3e: 0.293768
   3. chain_6v_5e: 0.204675
   4. chain_7v_6e: 0.050337

2. STRUCTURAL FEATURES:

   chain_4v_3e:
     • Conflict nodes: B
     • Cycles: B↔C
     • Max incoming edges: 2

   chain_5v_4e:
     • Conflict nodes: B, C
     • Cycles: B↔C
     • Max incoming edges: 2

   chain_6v_5e:
     • Conflict nodes: B, C
     • Cycles: None
     • Max incoming edges: 3

   chain_7v_6e:
     • Conflict nodes: C, D
     • Cycles: None
     • Max incoming edges: 2



